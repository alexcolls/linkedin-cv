<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ name }} - Professional CV</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header with Gradient -->
        <header class="header">
            <div class="header-gradient">
                <div class="header-content">
                    {% if profile_image_data %}
                    <div class="profile-photo">
                        <img src="{{ profile_image_data }}" alt="{{ name }}">
                    </div>
                    {% endif %}
                    <div class="header-text">
                        {% if name %}
                        <h1 class="name">{{ name }}</h1>
                        {% endif %}
                        {% if headline %}
                        <p class="headline">{{ headline }}</p>
                        {% endif %}
                        <div class="header-meta">
                            {% if location %}
                            <span class="meta-item">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                                {{ location }}
                            </span>
                            {% endif %}
                            {% if stats and stats.connections %}
                            <span class="meta-item">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="9" cy="7" r="4"></circle>
                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                </svg>
                                {{ stats.connections }} connections
                            </span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Two Column Layout -->
        <div class="main-content">
            <!-- Left Column (Sidebar) -->
            <aside class="sidebar">
                <!-- Contact Info -->
                {% if contact_info and (contact_info.email or contact_info.phone or contact_info.website) %}
                <section class="sidebar-section">
                    <h2 class="sidebar-title">Contact</h2>
                    <div class="contact-items">
                        {% if contact_info.email %}
                        <div class="contact-item">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                            <span>{{ contact_info.email }}</span>
                        </div>
                        {% endif %}
                        {% if contact_info.phone %}
                        <div class="contact-item">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                            <span>{{ contact_info.phone }}</span>
                        </div>
                        {% endif %}
                        {% if contact_info.website %}
                        <div class="contact-item">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            <span>{{ contact_info.website }}</span>
                        </div>
                        {% endif %}
                    </div>
                </section>
                {% endif %}

                <!-- Skills with Progress Bars -->
                {% if skills and skills|length > 0 %}
                <section class="sidebar-section">
                    <h2 class="sidebar-title">Top Skills</h2>
                    <div class="skills-list">
                        {% for skill in skills[:10] %}
                        <div class="skill-item">
                            <div class="skill-header">
                                <span class="skill-name">{{ skill.name }}</span>
                                {% if skill.endorsements %}
                                <span class="skill-count">{{ skill.endorsements }}</span>
                                {% endif %}
                            </div>
                            {% if skill.endorsements %}
                            <div class="skill-bar">
                                <div class="skill-progress" style="width: {{ [100, (skill.endorsements / 50 * 100)]|min }}%"></div>
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Languages -->
                {% if languages and languages|length > 0 %}
                <section class="sidebar-section">
                    <h2 class="sidebar-title">Languages</h2>
                    <div class="languages-list">
                        {% for language in languages %}
                        <div class="language-item">
                            <span class="language-name">{{ language.name }}</span>
                            {% if language.proficiency %}
                            <span class="language-level">{{ language.proficiency }}</span>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Certifications -->
                {% if certifications and certifications|length > 0 %}
                <section class="sidebar-section">
                    <h2 class="sidebar-title">Certifications</h2>
                    <div class="cert-list">
                        {% for cert in certifications[:5] %}
                        <div class="cert-item">
                            <div class="cert-name">{{ cert.name }}</div>
                            <div class="cert-issuer">{{ cert.issuing_organization }}</div>
                            {% if cert.issue_date %}
                            <div class="cert-date">{{ cert.issue_date }}</div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}
            </aside>

            <!-- Right Column (Main Content) -->
            <main class="content">
                <!-- About/Summary -->
                {% if about %}
                <section class="content-section">
                    <h2 class="section-title">Professional Summary</h2>
                    <p class="about-text">{{ about }}</p>
                </section>
                {% endif %}

                <!-- Experience with Timeline -->
                {% if experience and experience|length > 0 %}
                <section class="content-section">
                    <h2 class="section-title">Experience</h2>
                    <div class="timeline">
                        {% for job in experience %}
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="job-header">
                                    <div>
                                        <h3 class="job-title">{{ job.title }}</h3>
                                        <div class="company-info">
                                            <span class="company-name">{{ job.company.split('·')[0].strip() if '·' in job.company else job.company }}</span>
                                            {% if job.employment_type %}
                                            <span class="employment-badge">{{ job.employment_type }}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="job-meta">
                                        {% if job.duration %}
                                        <span class="duration">{{ job.duration }}</span>
                                        {% endif %}
                                        {% if job.location %}
                                        <span class="location">{{ job.location }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                                {% if job.description %}
                                <p class="job-description">{{ job.description }}</p>
                                {% endif %}
                                {% if job.skills and job.skills|length > 0 %}
                                <div class="skill-tags">
                                    {% for skill in job.skills[:6] %}
                                    <span class="tag">{{ skill }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Education -->
                {% if education and education|length > 0 %}
                <section class="content-section">
                    <h2 class="section-title">Education</h2>
                    {% for edu in education %}
                    <div class="education-item">
                        <div class="edu-header">
                            <div>
                                <h3 class="edu-institution">{{ edu.institution }}</h3>
                                {% if edu.degree %}
                                <div class="edu-degree">{{ edu.degree }}</div>
                                {% endif %}
                                {% if edu.field %}
                                <div class="edu-field">{{ edu.field }}</div>
                                {% endif %}
                            </div>
                            <div class="edu-meta">
                                {% if edu.duration %}
                                <span class="duration">{{ edu.duration }}</span>
                                {% endif %}
                                {% if edu.grade %}
                                <span class="grade">{{ edu.grade }}</span>
                                {% endif %}
                            </div>
                        </div>
                        {% if edu.activities %}
                        <div class="edu-activities">{{ edu.activities }}</div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </section>
                {% endif %}

                <!-- Projects -->
                {% if projects and projects|length > 0 %}
                <section class="content-section">
                    <h2 class="section-title">Projects</h2>
                    {% for project in projects %}
                    <div class="project-item">
                        <h3 class="project-name">{{ project.name }}</h3>
                        {% if project.date %}
                        <div class="project-date">{{ project.date }}</div>
                        {% endif %}
                        {% if project.description %}
                        <p class="project-description">{{ project.description }}</p>
                        {% endif %}
                    </div>
                    {% endfor %}
                </section>
                {% endif %}
            </main>
        </div>
        
        <!-- Footer with QR Code -->
        {% if qr_code %}
        <footer class="cv-footer">
            <div class="footer-content">
                <div class="footer-text">
                    <p class="footer-title">Scan to view my LinkedIn profile</p>
                    <p class="footer-url">{{ linkedin_url or profile_url }}</p>
                </div>
                <div class="qr-code-container">
                    <img src="{{ qr_code }}" alt="LinkedIn Profile QR Code" class="qr-code" />
                </div>
            </div>
        </footer>
        {% endif %}
    </div>
</body>
</html>
